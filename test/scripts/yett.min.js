!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).yett={})}(this,function(t){"use strict";window.MutationObserver||(window.MutationObserver=function(m){function a(t){this.i=[],this.m=t}function w(t){var e,n={type:null,target:null,addedNodes:[],removedNodes:[],previousSibling:null,nextSibling:null,attributeName:null,attributeNamespace:null,oldValue:null};for(e in t)n[e]!==m&&t[e]!==m&&(n[e]=t[e]);return n}function o(r,i){var a=l(r,i);return function(t){var e=t.length;if(i.a&&3===r.nodeType&&r.nodeValue!==a.a&&t.push(new w({type:"characterData",target:r,oldValue:a.a})),i.b&&a.b&&k(t,r,a.b,i.f),i.c||i.g)var n=function(b,t,e,h){function v(t,e,n,r,i){var a,o,l,c=t.length-1;for(i=-~((c-i)/2);l=t.pop();)a=n[l.j],o=r[l.l],h.c&&i&&Math.abs(l.j-l.l)>=c&&(b.push(w({type:"childList",target:e,addedNodes:[a],removedNodes:[a],nextSibling:a.nextSibling,previousSibling:a.previousSibling})),i--),h.b&&o.b&&k(b,a,o.b,h.f),h.a&&3===a.nodeType&&a.nodeValue!==o.a&&b.push(w({type:"characterData",target:a,oldValue:o.a})),h.g&&g(a,o)}function g(t,e){for(var n,r,i,a,o,l=t.childNodes,c=e.c,u=l.length,s=c?c.length:0,d=0,p=0,f=0;p<u||f<s;)(a=l[p])===(o=(i=c[f])&&i.node)?(h.b&&i.b&&k(b,a,i.b,h.f),h.a&&i.a!==m&&a.nodeValue!==i.a&&b.push(w({type:"characterData",target:a,oldValue:i.a})),r&&v(r,t,l,c,d),h.g&&(a.childNodes.length||i.c&&i.c.length)&&g(a,i),p++,f++):(y=!0,n||(n={},r=[]),a&&(n[i=S(a)]||(n[i]=!0,-1===(i=x(c,a,f,"node"))?h.c&&(b.push(w({type:"childList",target:t,addedNodes:[a],nextSibling:a.nextSibling,previousSibling:a.previousSibling})),d++):r.push({j:p,l:i})),p++),o&&o!==l[p]&&(n[i=S(o)]||(n[i]=!0,-1===(i=x(l,o,p))?h.c&&(b.push(w({type:"childList",target:e.node,removedNodes:[o],nextSibling:c[f+1],previousSibling:c[f-1]})),d--):r.push({j:i,l:f})),f++));r&&v(r,t,l,c,d)}var y;return g(t,e),y}(t,r,a,i);!n&&t.length===e||(a=l(r,i))}}function k(t,e,n,r){for(var i,a,o={},l=e.attributes,c=l.length;c--;)a=(i=l[c]).name,r&&r[a]===m||(u(e,i)!==n[a]&&t.push(w({type:"attributes",target:e,attributeName:a,oldValue:n[a],attributeNamespace:i.namespaceURI})),o[a]=!0);for(a in n)o[a]||t.push(w({target:e,type:"attributes",attributeName:a,oldValue:n[a]}))}function l(t,r){var i=!0;return function t(n){var e={node:n};return!r.a||3!==n.nodeType&&8!==n.nodeType?(r.b&&i&&1===n.nodeType&&(e.b=c(n.attributes,function(t,e){return r.f&&!r.f[e.name]||(t[e.name]=u(n,e)),t},{})),i&&(r.c||r.a||r.b&&r.g)&&(e.c=function(t,e){for(var n=[],r=0;r<t.length;r++)n[r]=e(t[r],r,t);return n}(n.childNodes,t)),i=r.g):e.a=n.nodeValue,e}(t)}function S(e){try{return e.id||(e.mo_id=e.mo_id||n++)}catch(t){try{return e.nodeValue}catch(t){return n++}}}function c(t,e,n){for(var r=0;r<t.length;r++)n=e(n,t[r],r,t);return n}function x(t,e,n,r){for(;n<t.length;n++)if((r?t[n][r]:t[n])===e)return n;return-1}a._period=30,a.prototype={observe:function(t,e){for(var n={b:!!(e.attributes||e.attributeFilter||e.attributeOldValue),c:!!e.childList,g:!!e.subtree,a:!(!e.characterData&&!e.characterDataOldValue)},r=this.i,i=0;i<r.length;i++)r[i].s===t&&r.splice(i,1);e.attributeFilter&&(n.f=c(e.attributeFilter,function(t,e){return t[e]=!0,t},{})),r.push({s:t,o:o(t,n)}),this.h||function(n){!function t(){var e=n.takeRecords();e.length&&n.m(e,n),n.h=setTimeout(t,a._period)}()}(this)},takeRecords:function(){for(var t=[],e=this.i,n=0;n<e.length;n++)e[n].o(t);return t},disconnect:function(){this.i=[],clearTimeout(this.h),this.h=null}};var t=document.createElement("i");t.style.top=0;var u=(t="null"!=t.attributes.style.value)?function(t,e){return e.value}:function(t,e){return"style"!==e.name?e.value:t.style.cssText},n=1;return a}(void 0));function a(e,t){var n=e&&(!t||t!==b)&&(!v.blacklist||v.blacklist.some(function(t){return t.test(e)}))&&(!v.whitelist||v.whitelist.every(function(t){return!t.test(e)}));return n&&-1===r.indexOf(e)&&(r.push(e),console.info("Script src '".concat(e,"' is blocked"))),n}function f(t){var e=t.getAttribute("src");return v.blacklist&&v.blacklist.every(function(t){return!t.test(e)})||v.whitelist&&v.whitelist.some(function(t){return t.test(e)})}var b="javascript/blocked",h=window.YETT_UNBLOCKINLINE||!1,v={blacklist:window.YETT_BLACKLIST,whitelist:window.YETT_WHITELIST},g={blacklisted:[]},r=[],y=new MutationObserver(function(t){for(var e=0;e<t.length;e++)for(var i=t[e].addedNodes,n=function(t){var n=i[t];if(1===n.nodeType&&"SCRIPT"===n.tagName&&!n.hasAttribute("data-noblock")){var e=n.src,r=n.type;if(a(e,r)){g.blacklisted.push(n.cloneNode()),n.type=b;n.addEventListener("beforescriptexecute",function t(e){n.getAttribute("type")===b&&e.preventDefault(),n.removeEventListener("beforescriptexecute",t)}),n.parentElement&&n.parentElement.removeChild(n)}}},r=0;r<i.length;r++)n(r)});y.observe(document.documentElement,{childList:!0,subtree:!0});var o=document.createElement;document.createElement=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if("script"!==e[0].toLowerCase())return o.bind(document).apply(void 0,e);var r=o.bind(document).apply(void 0,e),i=r.setAttribute.bind(r);try{Object.defineProperties(r,{src:{get:function(){return r.getAttribute("src")},set:function(t){return a(t,r.type)&&!r.hasAttribute("data-noblock")&&i("type",b),i("src",t),!0}},type:{set:function(t){var e=a(r.src,r.type)&&!r.hasAttribute("data-noblock")?b:t;return i("type",e),!0}}}),r.setAttribute=function(t,e){"type"===t||"src"===t?r[t]=e:HTMLScriptElement.prototype.setAttribute.call(r,t,e)}}catch(t){console.warn("Yett: unable to prevent script execution for script src ",r.src,".\n",'A likely cause would be because you are using a third-party browser extension that monkey patches the "document.createElement" function.')}return r};var m=new RegExp("[|\\{}()[\\]^$+*?.]","g");t.unblock=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];n.length<1?(v.blacklist=[],v.whitelist=[]):(v.blacklist&&(v.blacklist=v.blacklist.filter(function(e){return n.every(function(t){return"string"==typeof t?!e.test(t):t instanceof RegExp?e.toString()!==t.toString():void 0})})),v.whitelist&&(v.whitelist=v.whitelist.concat(n.map(function(e){if("string"==typeof e){var n=".*"+e.replace(m,"\\$&")+".*";if(v.whitelist.every(function(t){return t.toString()!==n.toString()}))return new RegExp(n)}else if(e instanceof RegExp&&v.whitelist.every(function(t){return t.toString()!==e.toString()}))return e;return null}).filter(Boolean))));for(var r=document.querySelectorAll('script[type="'.concat(b,'"]')),i=0;i<r.length;i++){var a=r[i];f(a)&&(a.type="application/javascript",g.blacklisted.push(a),a.parentElement.removeChild(a))}for(var o=g.blacklisted.length-1;0<=o;--o){var l=g.blacklisted[o];if(f(l)){var c=document.createElement("script");c.setAttribute("src",l.src),c.setAttribute("type","application/javascript"),document.head.appendChild(c),g.blacklisted.splice(o,1)}}if(v.blacklist&&v.blacklist.length<1&&y.disconnect(),h)for(var u=document.querySelectorAll('script[type="javascript/inlineblocked"]'),s=0;s<u.length;s++){var d=u[s],p=document.createElement("script");p.type="text/javascript",p.innerText=d.innerText,d.parentNode.replaceChild(p,d)}},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=yett.min.js.map
